!function(n){"use strict";function t(r){function u(n){a(n),b=!1,y&&f()}function a(t){function i(){if(!(t.images&&t.images instanceof Array))throw new Error("Options object should have 'images' property (type of array) containing paths to the loaded images.");for(var n=0;n<t.images.length;n++)if("string"!=typeof t.images[n]&&!t.images[n].hasOwnProperty("src"))throw new Error("Objects in 'images' property should have src property");return t.images.slice(0)}function r(){if(t.onComplete&&"function"!=typeof t.onComplete)throw new Error("'onComplete' property should be a function");return d(t.onComplete,n)}function u(){if(t.onFileComplete&&"function"!=typeof t.onFileComplete)throw new Error("'onFileComplete' property should be a function");return d(t.onFileComplete,n)}function a(){if(t.onFileStart&&"function"!=typeof t.onFileStart)throw new Error("'onFileStart' property should be a function");return d(t.onFileStart,n)}function f(){return d(t.autoload,!0)}function s(){var n=d(t.numberOfThreads,1),e=parseInt(n);if(isNaN(e)||1>e)throw new Error("'numberOfThreads' should be integer number grater than 0");return e}function c(){var e=d(t.simulationDelayMin,n),o=parseInt(e);if("undefined"!=typeof e&&(isNaN(o)||0>o))throw new Error("'simulationDelayMin' should be a non-negative integer number");return"undefined"==typeof e&&(o=n),o}function l(){var e=d(t.simulationDelayMax,n),o=parseInt(e);if("undefined"!=typeof e&&(isNaN(o)||0>o))throw new Error("'simulationDelayMax' should be a non-negative integer number");return"undefined"==typeof e&&(o=n),o}function d(n,t){return"undefined"==typeof n?t:n}if(!t||"object"!=typeof t)throw new Error("Options should be an Object");w=new e(i()),E=r(),D=u(),L=a(),y=f(),v=s();var m=c(),g=l();o.setSimulationDelays(m,g)}function f(){b===!1&&m()===!1&&(b=!0,s())}function s(){for(var n=0;v>n;n++)new i({onThreadComplete:d,onFileComplete:c,onFileStart:l,queue:w})}function c(n){D&&D(n)}function l(n){L&&L(n)}function d(){m()&&E&&(b=!1,E())}function m(){return w.isComplete()}function g(){return w.getPercentLoaded()}function h(n){return w.getItemAt(n)}function p(){return w.length}if(!(this instanceof t))return new t(r);var y,w,v,E,D,L,b,C=this;return u(r),C.load=f,C.isComplete=m,C.getPercentLoaded=g,C.getItemAt=h,C.length=p,this}function e(n){function t(){r=i(n),u.length=r.length}function i(n){for(var t=[],e=0;e<n.length;e++)"string"==typeof n[e]?t.push(new o({src:n[e]})):"object"==typeof n[e]&&t.push(new o(n[e]));return t}if(!(this instanceof e))return new e(n);var r,u=this;return u.length=0,t(),u.getItemAt=function(n){return r[n]},u.isComplete=function(){for(var n,t=!0,e=0;e<r.length;e++)if(n=r[e],n.isPending()||n.isLoading()){t=!1;break}return t},u.getNextPendingItem=function(){for(var n,t=0;t<r.length;t++)if(r[t].isPending()){n=r[t];break}return n},u.getPercentLoaded=function(){var n,t=0,e=r.length;for(t;e>t&&(n=r[t],!n.isPending()&&!n.isLoading());t++);return t/e},this}function o(t){function e(){i(),f()}function i(){for(var n in t)w[n]=t[n];w.tag=document.createElement("img")}function r(){w.status=y.FAILED}function u(){w.status=y.COMPLETE}function a(){w.status=y.LOADING}function f(){w.status=y.PENDING}function s(){w.tag.removeEventListener("load",c),w.tag.removeEventListener("error",l)}function c(){o.simulationDelayMin?setTimeout(function(){d()},h()):d()}function l(){o.simulationDelayMin?setTimeout(function(){m()},h()):m()}function d(){s(),u(),g(),p=n}function m(){s(),w.tag=n,r(),g(),p=n}function g(){p&&p(w)}function h(){var n=o.simulationDelayMax,t=o.simulationDelayMin;return Math.floor(Math.random()*(n-t)+t)}if(!(this instanceof o))return new o;var p,y={PENDING:"pending",LOADING:"loading",COMPLETE:"complete",FAILED:"failed"},w=this;return e(),w.load=function(n){p=n,a(),w.tag.addEventListener("load",c),w.tag.addEventListener("error",l),w.tag.src=w.src},w.isPending=function(){return w.status===y.PENDING},w.isComplete=function(){return w.status===y.COMPLETE},w.isLoading=function(){return w.status===y.LOADING},w.isFailed=function(){return w.status===y.FAILED},this}function i(n){function t(){r=n.onThreadComplete,u=n.onFileComplete,a=n.onFileStart,f=n.queue,e()}function e(){var n=f.getNextPendingItem();"undefined"==typeof n?r():(n.load(o),a(n))}function o(n){u(n),e()}if(!(this instanceof i))return new i(n);var r,u,a,f;return t(),this}window.ImageLoader=t,o.setSimulationDelays=function(n,t){var e=n,i=t;e&&!i?i=e:i&&!e&&(e=i),o.simulationDelayMin=e,o.simulationDelayMax=i}}();