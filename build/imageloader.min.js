!function(n){"use strict";function e(r){function u(n){a(n),L=!1,y&&f()}function a(e){function i(){if(!(e.images&&e.images instanceof Array))throw new Error("Options object should have 'images' property (type of array) containing paths to the loaded images.");for(var n=0;n<e.images.length;n++){if(!e.images[n])throw new Error("Objects in 'images' cannot be null or undefined");if("string"!=typeof e.images[n]&&!e.images[n].hasOwnProperty("src"))throw new Error("Objects in 'images' property should have src property")}return e.images.slice(0)}function r(){if(e.onComplete&&"function"!=typeof e.onComplete)throw new Error("'onComplete' property should be a function");return d(e.onComplete,n)}function u(){if(e.onFileComplete&&"function"!=typeof e.onFileComplete)throw new Error("'onFileComplete' property should be a function");return d(e.onFileComplete,n)}function a(){if(e.onFileStart&&"function"!=typeof e.onFileStart)throw new Error("'onFileStart' property should be a function");return d(e.onFileStart,n)}function f(){return d(e.autoload,!0)}function s(){var n=d(e.numberOfThreads,1),t=parseInt(n);if(isNaN(t)||1>t)throw new Error("'numberOfThreads' should be integer number grater than 0");return t}function l(){var t=d(e.simulationDelayMin,n),o=parseInt(t);if("undefined"!=typeof t&&(isNaN(o)||0>o))throw new Error("'simulationDelayMin' should be a non-negative integer number");return"undefined"==typeof t&&(o=n),o}function c(){var t=d(e.simulationDelayMax,n),o=parseInt(t);if("undefined"!=typeof t&&(isNaN(o)||0>o))throw new Error("'simulationDelayMax' should be a non-negative integer number");return"undefined"==typeof t&&(o=n),o}function d(n,e){return"undefined"==typeof n?e:n}if(!e||"object"!=typeof e)throw new Error("Options should be an Object");v=new o(i()),E=r(),D=u(),b=a(),y=f(),w=s();var m=l(),g=c();t.setSimulationDelays(m,g)}function f(){L===!1&&m()===!1&&(L=!0,s())}function s(){for(var n=0;w>n;n++)new i({onThreadComplete:d,onFileComplete:l,onFileStart:c,queue:v})}function l(n){D&&D(n)}function c(n){b&&b(n)}function d(){m()&&E&&(L=!1,E())}function m(){return v.isComplete()}function g(){return v.getPercentLoaded()}function p(n){return v.getItemAt(n)}function h(){return v.length}if(!(this instanceof e))return new e(r);var y,v,w,E,D,b,L,C=this;return u(r),C.load=f,C.isComplete=m,C.getPercentLoaded=g,C.getItemAt=p,C.length=h,this}function t(e){function o(){i(),f()}function i(){for(var n in e)y[n]=e[n];y.tag=document.createElement("img")}function r(){y.status=h.FAILED}function u(){y.status=h.COMPLETE}function a(){y.status=h.LOADING}function f(){y.status=h.PENDING}function s(){y.tag.removeEventListener("load",l),y.tag.removeEventListener("error",c)}function l(){t.simulationDelayMin?setTimeout(function(){d()},g()):d()}function c(){t.simulationDelayMin?setTimeout(function(){m()},g()):m()}function d(){s(),u(),p(y),p=n}function m(){s(),y.tag=n,r(),p(y),p=n}function g(){var n=t.simulationDelayMax,e=t.simulationDelayMin;return Math.floor(Math.random()*(n-e)+e)}var p,h={PENDING:"pending",LOADING:"loading",COMPLETE:"complete",FAILED:"failed"},y=this;return o(),y.load=function(n){p=n,a(),y.tag.addEventListener("load",l),y.tag.addEventListener("error",c),y.tag.src=y.src},y.isPending=function(){return y.status===h.PENDING},y.isComplete=function(){return y.status===h.COMPLETE},y.isLoading=function(){return y.status===h.LOADING},y.isFailed=function(){return y.status===h.FAILED},this}function o(n){function e(){i=o(n),r.length=i.length}function o(n){for(var e=[],o=0;o<n.length;o++)e.push("string"==typeof n[o]?new t({src:n[o]}):new t(n[o]));return e}var i,r=this;return r.length=0,e(),r.getItemAt=function(n){return i[n]},r.isComplete=function(){for(var n,e=!0,t=0;t<i.length;t++)if(n=i[t],n.isPending()||n.isLoading()){e=!1;break}return e},r.getNextPendingItem=function(){for(var n,e=0;e<i.length;e++)if(i[e].isPending()){n=i[e];break}return n},r.getPercentLoaded=function(){var n,e=0,t=i.length;for(e;t>e&&(n=i[e],!n.isPending()&&!n.isLoading());e++);return e/t},this}function i(n){function e(){i=n.onThreadComplete,r=n.onFileComplete,u=n.onFileStart,a=n.queue,t()}function t(){var n=a.getNextPendingItem();"undefined"==typeof n?i():(n.load(o),u(n))}function o(n){r(n),t()}var i,r,u,a;return e(),this}window.ImageLoader=e,t.setSimulationDelays=function(n,e){var o=n,i=e;o&&!i?i=o:i&&!o&&(o=i),t.simulationDelayMin=o,t.simulationDelayMax=i}}();