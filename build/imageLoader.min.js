!function(n){"use strict";function e(r){function u(n){a(n),E=!1,p&&f()}function a(e){function t(){if(!(e.images&&e.images instanceof Array))throw new Error("Options object should have 'images' property (type of array) containing paths to the loaded images.");for(var n=0;n<e.images.length;n++)if("string"!=typeof e.images[n]&&!e.images[n].hasOwnProperty("src"))throw new Error("Objects in 'images' property should have src property");return e.images.slice(0)}function r(){if(e.onComplete&&"function"!=typeof e.onComplete)throw new Error("'onComplete' property should be a function");return d(e.onComplete,n)}function u(){if(e.onFileComplete&&"function"!=typeof e.onFileComplete)throw new Error("'onFileComplete' property should be a function");return d(e.onFileComplete,n)}function a(){if(e.onFileStart&&"function"!=typeof e.onFileStart)throw new Error("'onFileStart' property should be a function");return d(e.onFileStart,n)}function f(){return d(e.autoload,!0)}function s(){var n=d(e.numberOfThreads,1),t=parseInt(n);if(isNaN(t)||1>t)throw new Error("'numberOfThreads' should be integer number grater than 0");return t}function c(){var t=d(e.simulationDelayMin,n),o=parseInt(t);if("undefined"!=typeof t&&(isNaN(o)||0>o))throw new Error("'simulationDelayMin' should be a non-negative integer number");return"undefined"==typeof t&&(o=n),o}function l(){var t=d(e.simulationDelayMax,n),o=parseInt(t);if("undefined"!=typeof t&&(isNaN(o)||0>o))throw new Error("'simulationDelayMax' should be a non-negative integer number");return"undefined"==typeof t&&(o=n),o}function d(n,e){return"undefined"==typeof n?e:n}if(!e||"object"!=typeof e)throw new Error("Options should be an Object");g=new o(t()),y=r(),v=u(),w=a(),p=f(),h=s();var m=c(),E=l();i.setSimulationDelays(m,E)}function f(){E===!1&&m()===!1&&(E=!0,s())}function s(){for(var n=0;h>n;n++)new t({onThreadComplete:d,onFileComplete:c,onFileStart:l,queue:g})}function c(n){v&&v(n)}function l(n){w&&w(n)}function d(){m()&&y&&(E=!1,y())}function m(){return g.isComplete()}if(!(this instanceof e))return new e(r);var p,g,h,y,v,w,E,D=this;return u(r),D.getQueue=function(){return g},D.getPercentLoaded=function(){return g.getPercentLoaded()},D.load=f,D.isComplete=m,this}function t(n){function e(){u=n.onThreadComplete,a=n.onFileComplete,f=n.onFileStart,s=n.queue,o()}function o(){var n=s.getNextPendingItem();"undefined"==typeof n?u():(n.load(i),f(n))}function i(n){a(n),o()}if(!(this instanceof t))return new t(n);{var u,a,f,s;r++}return e(),this}function o(n){function e(){r=t(n),u.length=r.length}function t(n){for(var e=[],t=0;t<n.length;t++)"string"==typeof n[t]?e.push(new i({src:n[t]})):"object"==typeof n[t]&&e.push(new i(n[t]));return e}if(!(this instanceof o))return new o(n);var r,u=this;return u.length=0,e(),u.get=function(n){return r[n]},u.isComplete=function(){for(var n,e=!0,t=0;t<r.length;t++)if(n=r[t],n.isPending()||n.isLoading()){e=!1;break}return e},u.getNextPendingItem=function(){for(var n,e=0;e<r.length;e++)if(r[e].isPending()){n=r[e];break}return n},u.getPercentLoaded=function(){var n,e=0,t=r.length;for(e;t>e&&(n=r[e],!n.isPending()&&!n.isLoading());e++);return e/t},this}function i(e){function t(){o(),f()}function o(){for(var n in e)v[n]=e[n];v.tag=document.createElement("img")}function r(){v.status=y.FAILED}function u(){v.status=y.COMPLETE}function a(){v.status=y.LOADING}function f(){v.status=y.PENDING}function s(){v.tag.removeEventListener("load",c),v.tag.removeEventListener("error",l)}function c(){i.simulationDelayMin?setTimeout(function(){d()},g()):d()}function l(){i.simulationDelayMin?setTimeout(function(){m()},g()):m()}function d(){s(),u(),p(),h=n}function m(){s(),v.tag=n,r(),p(),h=n}function p(){h&&h(v)}function g(){var n=i.simulationDelayMax,e=i.simulationDelayMin;return Math.floor(Math.random()*(n-e)+e)}if(!(this instanceof i))return new i;var h,y={PENDING:"pending",LOADING:"loading",COMPLETE:"complete",FAILED:"failed"},v=this;return t(),v.load=function(n){h=n,a(),v.tag.addEventListener("load",c),v.tag.addEventListener("error",l),v.tag.src=v.src},v.isPending=function(){return v.status===y.PENDING},v.isComplete=function(){return v.status===y.COMPLETE},v.isLoading=function(){return v.status===y.LOADING},v.isFailed=function(){return v.status===y.FAILED},this}window.Preloader=e;var r=0;i.setSimulationDelays=function(n,e){var t=n,o=e;t&&!o?o=t:o&&!t&&(t=o),i.simulationDelayMin=t,i.simulationDelayMax=o}}();